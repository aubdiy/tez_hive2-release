Changes only in Hortonworks github and not in Apache Tez release 0.8.4 and hence not covered by CHANGES.txt.



INCOMPATIBLE CHANGES

NEW FEATURES
   TEZ-3230. (BUG-67298) Implement vertex manager and edge manager of cartesian product edge.
   TEZ-3465. Support broadcast edge into cartesian product vertex and forbid other edges.
   TEZ-3458. Auto grouping for cartesian product edge(unpartitioned case).


IMPROVEMENTS

  TEZ-3207. Add support for fetching multiple partitions from the same source task to UnorderedKVInput. Contributed by Ming Ma.
  TEZ-3708. Improve parallelism and auto grouping of unpartitioned cartesian product (zhiyuany)
  TEZ-3206. Have unordered partitioned KV output send partition stats via VertexManagerEvent. Contributed by Ming Ma.
  TEZ-3654. Make CartesianProduct edge work with GroupInputEdge (zhiyuany)
  TEZ-3697. Adding #output_record in vertex manager event payload (zhiyuany)
  TEZ-3550. BUG-69635. Provide access to sessionId/dagId via DagClient. (sseth)
  TEZ-3716. BUG-76373. Allow attempt retries to be treated the same as the first attempt
  TEZ-3715. BUG-76373. Differentiate between TaskAttempt submission and TaskAttempt
  TEZ-3700. BUG-79791. Consumer attempt should kill itself instead of failing during validation checks with final merge avoidance.
  TEZ-3284. BUG-80166. Avoid synchronization for every write in UnorderdKVWriter.
  TEZ-3494. (BUG-73376) Support relative url for tez-ui.history-url.base config (hitesh via sree)
  TEZ-3647. (BUG-75204) Add a setting which lets Tez determine Xmx.
  TEZ-3634. (BUG-74988) reduce the buffer sizes in PipelinedSorter by a small amount.
  TEZ-3627. (BUG-56692) Use queue name available in RegisterApplicationMasterResponse for publishing to ATS.
  TEZ-3267. (BUG-56692) Publish queue name to ATS as part of dag summary.
  TEZ-3581. (BUG-69744) Add different logger to enable suppressing logs for specific lines.
  TEZ-3601. (BUG-73672) Add another HistoryLogLevel to suppress TaskAttempts at specific levels.
  TEZ-3404. (BUG-68838) Move blocking call for YARN Timeline domain creation from client side to AM.
  TEZ-3434. (BUG-69188) Add unit tests for flushing of recovery events.
  TEZ-3405. (BUG-63627) Support ability for AM to kill itself if there is no client heartbeating to it.


BUG FIXES

  TEZ-3795. (BUG-85228) Vertex state machine can throw InvalidStateTransitonException from TERMINATING state
  TEZ-3748. (BUG-85229) TaskAttemptImpl State Machine Invalid event: TA_SUBMITTED at KILL_IN_PROGRESS
  TEZ-3784. (BUG-84794) Submitting very large DAG throws com.google.protobuf.CodedInputStream exception
  TEZ-3245 (TEZ-3207). Data race between addKnowInput and clearAndGetOnepartition of InputHost
  TEZ-3719. (BUG-80738) DAGImpl.computeProgress slows down dispatcher and ipc threads (Gopal V via jeagles)
  TEZ-3644. (BUG-76200) Cleanup container list stored in AMNode. (sseth)
  TEZ-3643. (BUG-76200) Long running AMs can go out of memory due to retained AMContainer instances. (sseth)
  TEZ-3637. (BUG-72438) TezMerger logs too much at INFO level. (sseth)
  TEZ-3624. (BUG-70899) Split multiple calls on the same line in TaskCommunicatorContextImpl. (sseth)
  TEZ-3575. (BUG-72167) RM have started forwarding origin. Use that in AMWebController for CORS support (sree)
  TEZ-3458. (BUG-67470) Disable auto-grouping by default.
  TEZ-3584. (BUG-72164) AMKeepAliveService not shutdown correctly when HS2 runs into an AM which fails.
  TEZ-3558. (BUG-70596) CartesianProduct is missing from the ExampleDriver class
  TEZ-3534. Differentiate thread names on Fetchers, minor changes to shuffle shutdown code.
  TEZ-3609. (BUG-73674) Improve ATSv15 performance for DAG entities read calls.
  TEZ-3000. (BUG-69238) Fix TestContainerReuse.
  TEZ-2852. (BUG-69238) TestVertexImpl fails due to race in AsyncDispatcher.
  TEZ-3582. (BUG-72610) Exception swallowed in PipelinedSorter causing incorrect results.
  TEZ-3579. (BUG-72619) Wrong configuration key for max slow start fraction in CartesianProductVertexManager.
  TEZ-3574. (BUG-72510) Container reuse won't pickup extra dag level local resource.
  TEZ-3568. (BUG-69826) Update SecurityUtils configuration to pick user provided configuration.
  TEZ-3566. (BUG-68946) Avoid caching fs isntances in TokenCache after a point.
  TEZ-3536. (BUG-69492) NPE in WebUIService start when host resolution fails.
  TEZ-3493. (BUG-67950) DAG submit timeout cannot be set to a month.
  TEZ-3533. ShuffleScheduler should shutdown threadpool on exit.
  TEZ-3409. Log dagId along with other information when submitting a dag.
  TEZ-3384. Fix TestATSV15HistoryLoggingService::testDAGGroupingGroupingEnabled unit test.  
  TEZ-3376. Fix groupId generation to account for dagId starting with 1.
  TEZ-3359. Add granular log levels for HistoryLoggingService.
  TEZ-3374. Change TEZ_HISTORY_LOGGING_TIMELINE_NUM_DAGS_PER_GROUP conf key name.
  TEZ-3358. Support using the same TimelineGroupId for multiple DAGs.
  TEZ-3357. Change TimelineCachePlugin to handle DAG grouping.
  TEZ-3348. NullPointerException in Tez MROutput while trying to write using
            Parquet's DeprecatedParquetOutputFormat.
  TEZ-3356. Fix initializing of stats when custom ShuffleVertexManager is used.
  TEZ-3329. Tez ATS data is incomplete for a vertex which fails or gets killed before initialization.
  TEZ-3235. Modify Example TestOrderedWordCount job to test the IPC limit for large dag plans.
  TEZ-3337. Do not log empty fields of TaskAttemptFinishedEvent to avoid confusion.
  TEZ-1248. Reduce slow-start should special case 1 reducer runs.
  TEZ-3370. Tez UI: Display the log link as N/A if the app does not provide a log link
